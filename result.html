<!DOCTYPE html>
<html lang="ko">
<head>
  <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-6791974364232767"
     crossorigin="anonymous"></script>
  <!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-ERBPCBM10V"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-ERBPCBM10V');
</script>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>ê²°ê³¼ í˜ì´ì§€</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet" />
  <style>
    body {
        font-family: Pretendard, -apple-system, BlinkMacSystemFont, system-ui, Roboto, 'Helvetica Neue', 'Segoe UI', 'Apple SD Gothic Neo', 'Noto Sans KR', 'Malgun Gothic', sans-serif;
    }
    .content-wrapper {
      max-width: 100%;
      padding: 1rem;
    }
    @media (min-width: 992px) {
      .content-wrapper {
        max-width: 30%;
        margin: auto;
      }
    }
    .table-container {
      overflow-x: auto;
      -webkit-overflow-scrolling: touch;
      margin-top: 1.5rem;
    }
    .table {
      font-size: 1rem;
      color: #333;
      font-weight: 500;
    }
    .table th, .table td {
      text-align: center;
      vertical-align: middle;
      padding: 0.5rem;
      border: 1px solid #dee2e6;
    }
    .table thead th {
      background-color: #e9ecef;
      font-weight: 600;
    }
    .alert-success {
      font-weight: 500;
      animation: fadeIn 0.5s ease-in;
    }
    .chart-container {
      position: relative;
      margin: 2rem 0;
      padding: 1rem;
      background: #f8f9fa;
      border-radius: 8px;
      box-shadow: 0 2px 4px rgba(0,0,0,0.05);
    }
    @keyframes fadeIn {
      from { opacity: 0; transform: translateY(10px); }
      to { opacity: 1; transform: translateY(0); }
    }
    @media (max-width: 768px) {
      .table {
        font-size: 0.9rem;
      }
      .table th, .table td {
        padding: 0.3rem;
      }
      .chart-container {
        padding: 0.5rem;
      }
      .alert-success {
        font-size: 0.9rem;
      }
    }
  </style>
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>
<body>
  <div class="container mt-5 content-wrapper">
    <h2 class="mb-4 text-center">ë‚˜ì˜ ë¹„êµ ê²°ê³¼</h2>
    
    <!-- ìµœê³  ì ìˆ˜ -->
    <div id="topCandidate" class="alert alert-success text-center" role="alert">
      ìµœê³  ì ìˆ˜: ê³„ì‚° ì¤‘...
    </div>

    <!-- ì°¨íŠ¸ -->
    <div class="chart-container">
      <canvas id="resultChart" width="400" height="200"></canvas>
    </div>

    <!-- â²ï¸ ì„ ê±° ì¼ì • í…Œì´ë¸” -->
    <h6 class="mb-4"><b>ğŸ—³ï¸ ì œ 21 ëŒ€ ëŒ€í†µë ¹ ì„ ê±° ì¼ì •</b></h6>
    <div class="table-container">
      <table class="table table-bordered election-table" style="font-size:70%">
        <tbody>
          <tr id="candidate-reg-end">
            <td>í›„ë³´ìë“±ë¡ ì‹ ì²­</td>
            <td class="expire-time">5ì›” 11ì¼ ê¹Œì§€</td>
          </tr>
          <tr id="early-voting-start">
            <td>ì‚¬ì „íˆ¬í‘œ ì‹œì‘ê¹Œì§€</td>
            <td class="expire-time">5ì›”29ì¼ ì˜¤ì „ 6ì‹œë¶€í„°</td>
          </tr>
          <tr id="early-voting-end">
            <td>ì‚¬ì „íˆ¬í‘œ ì¢…ë£Œê¹Œì§€</td>
            <td class="expire-time">5ì›” 30ì¼ ì˜¤í›„ 6ì‹œê¹Œì§€</td>
          </tr>
          <tr id="election-day-start">
            <td>ë³¸ íˆ¬í‘œ ì‹œì‘ê¹Œì§€</td>
            <td class="expire-time">6ì›” 3ì¼ ì˜¤ì „ 6ì‹œë¶€í„°</td>
          </tr>
          <tr id="election-day-end">
            <td>ë³¸ íˆ¬í‘œ ì¢…ë£Œê¹Œì§€</td>
            <td class="expire-time">6ì›” 3ì¼ ì˜¤í›„ 8ì‹œê¹Œì§€</td>
          </tr>
        </tbody>
      </table>
    </div>
    <br>
    <!-- ğŸ“º í† ë¡  ì¼ì • í…Œì´ë¸” -->
    <h6 class="mb-4"><b>ğŸ“º ë‹¤ê°€ì˜¤ëŠ” í† ë¡  ì¼ì •</b></h6>
    <div class="table-container">
      <table class="table table-bordered debate-table" style="font-size:70%">
        <thead>
          <tr>
            <th>íšŒì°¨</th>
            <th>ì¼ì‹œ</th>
            <th>ì£¼ì œ</th>
            <th>ë°©ì†¡ì‚¬</th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <td>ì´ˆì²­ 1ì°¨</td>
            <td>5ì›” 18ì¼(ì¼) ì˜¤í›„ 8ì‹œ</td>
            <td>ì €ì„±ì¥ ê·¹ë³µê³¼ ë¯¼ìƒê²½ì œ í™œì„±í™” ë°©ì•ˆ</td>
            <td>SBS</td>
          </tr>
          <tr>
            <td>íŠ¹ë³„íšŒì</td>
            <td>5ì›” 19ì¼(ì›”) ì˜¤í›„ 10ì‹œ</td>
            <td>ë¯¸ì´ˆì²­ í›„ë³´ì í† ë¡ (ì£¼ì œ ë¯¸ì •)</td>
            <td>SBS</td>
          </tr>
          <tr>
            <td>ì´ˆì²­ 2ì°¨</td>
            <td>5ì›” 23ì¼(ê¸ˆ) ì˜¤í›„ 8ì‹œ</td>
            <td>ì‚¬íšŒ ê°ˆë“± ê·¹ë³µê³¼ í†µí•© ë°©ì•ˆ</td>
            <td>KBS</td>
          </tr>
          <tr>
            <td>ì´ˆì²­ 3ì°¨</td>
            <td>5ì›” 27ì¼(í™”) ì˜¤í›„ 8ì‹œ</td>
            <td>ì •ì¹˜ ì–‘ê·¹í™” í•´ì†Œ ë°©ì•ˆ</td>
            <td>MBC</td>
          </tr>
        </tbody>
      </table>
    </div>

    <!-- í–‰ë™ ìœ ë„ -->
    <p class="text-success mt-4 text-center">ì†Œì¤‘í•œ í•œ í‘œ, ë¹„êµí•˜ê³  ì‹ ì¤‘í•˜ê²Œ ì„ íƒí•˜ì„¸ìš”!</p>
    <p class="text-muted text-center">ì¹œêµ¬ë“¤ê³¼ ê²°ê³¼ë¥¼ ê³µìœ í•˜ê±°ë‚˜ ë¹„êµí‘œë¥¼ ìˆ˜ì •í•´ë³´ì„¸ìš”!</p>
    <div class="text-center mt-4">
      <div class="d-grid gap-2">
        <a href="compare.html" class="btn btn-primary btn-lg">ë¹„êµí‘œ ìˆ˜ì •í•˜ê¸°</a>
        <button id="shareBtn" class="btn btn-outline-secondary btn-lg">ë‚´ ê²°ê³¼í‘œ ê³µìœ í•˜ê¸°</button>
        <a href="index.html" class="btn btn-danger btn-lg">í™ˆìœ¼ë¡œ</a>
      </div>
    </div>
  </div>
    <footer class="text-center mt-5 mb-3">
    Â© 2025 í—ˆìŠ¬ì—… - ì†Œì¤‘í•œ íˆ¬í‘œê¶Œì„ ì‹ ì¤‘íˆ í–‰ì‚¬í•©ì‹œë‹¤.
    <br> ë¬¸ì˜ - hustlin.up@gmail.com
  </footer>
  
  <script>
    const params = new URLSearchParams(window.location.search);
    const scoreA = parseInt(params.get("a")) || 0;
    const scoreB = parseInt(params.get("b")) || 0;
    const scoreC = parseInt(params.get("c")) || 0;
    const nameA = params.get("n1") || "í™ê¸¸ë™";
    const nameB = params.get("n2") || "ì´ëª½ë£¡";
    const nameC = params.get("n3") || "ì„±ì¶˜í–¥";

    // ìµœê³  ì ìˆ˜ ê³„ì‚°
    const scores = [
      { name: nameA, score: scoreA },
      { name: nameB, score: scoreB },
      { name: scoreC ? nameC : null, score: scoreC }
    ].filter(c => c.score > 0);
    const maxScore = Math.max(scoreA, scoreB, scoreC);
    const topCandidates = scores.filter(c => c.score === maxScore).map(c => c.name);
    const topCandidateText = topCandidates.length > 1 
      ? `ê³µë™ 1ìœ„: ${topCandidates.join(", ")} (${maxScore}ì )`
      : `ìµœê³  ì ìˆ˜: ${topCandidates[0]} (${maxScore}ì )`;
    document.getElementById("topCandidate").textContent = topCandidateText;

    // ì°¨íŠ¸ ìƒì„±
    new Chart(document.getElementById("resultChart"), {
      type: "bar",
      data: {
        labels: scores.map(c => c.name),
        datasets: [{
          label: "ì´ì ",
          data: scores.map(c => c.score),
          backgroundColor: [
            'rgba(74, 144, 226, 0.8)',
            'rgba(233, 78, 119, 0.8)',
            'rgba(247, 183, 49, 0.8)'
          ],
          borderColor: [
            'rgba(74, 144, 226, 1)',
            'rgba(233, 78, 119, 1)',
            'rgba(247, 183, 49, 1)'
          ],
          borderWidth: 1,
          hoverBackgroundColor: [
            'rgba(74, 144, 226, 1)',
            'rgba(233, 78, 119, 1)',
            'rgba(247, 183, 49, 1)'
          ],
          hoverBorderColor: '#333',
          hoverBorderWidth: 2
        }]
      },
      options: {
        animation: {
          duration: 1000,
          easing: 'easeOutQuart'
        },
        plugins: {
          legend: {
            display: false
          },
          tooltip: {
            enabled: true,
            backgroundColor: 'rgba(0,0,0,0.8)',
            titleFont: { size: 14 },
            bodyFont: { size: 12 },
            callbacks: {
              label: function(context) {
                const score = context.raw;
                const percentage = ((score / 75) * 100).toFixed(1);
                return `${context.label}: ${score}ì  (${percentage}%)`;
              }
            }
          }
        },
        scales: {
          x: {
            ticks: {
              font: { size: 12, weight: 'bold' },
              color: '#333',
              maxRotation: 45,
              minRotation: 0
            },
            grid: { display: false }
          },
          y: {
            beginAtZero: true,
            max: 75,
            ticks: {
              stepSize: 15,
              font: { size: 12 },
              color: '#333'
            },
            grid: {
              color: '#dee2e6',
              borderDash: [5, 5]
            }
          }
        },
        responsive: true,
        maintainAspectRatio: false,
        layout: {
          padding: 10
        },
        elements: {
          bar: {
            borderRadius: 4,
            hoverShadow: '0 4px 8px rgba(0,0,0,0.2)'
          }
        }
      }
    });

    // ê³µìœ  ë²„íŠ¼
    document.getElementById("shareBtn").addEventListener("click", () => {
      const shareUrl = window.location.href;
      if (navigator.share) {
        navigator.share({ title: "ë‚´ ëŒ€ì„  ë¹„êµí‘œ", url: shareUrl });
      } else {
        navigator.clipboard.writeText(shareUrl).then(() => {
          alert("ê²°ê³¼ URLì´ ë³µì‚¬ë˜ì—ˆìŠµë‹ˆë‹¤. ê³µìœ í•´ë³´ì„¸ìš”!");
        });
      }
    });
  </script>
</body>
</html>
